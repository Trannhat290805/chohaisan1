{% extends 'base.html' %}

{% block content %}
<style>
.cart-container {
    display: flex;
    gap: 30px;
    padding: 20px;
    font-family: Arial;
}

.cart-left {
    flex: 3;
    background: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

.cart-right {
    flex: 1.5;
    background: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
    height: fit-content;
}

.cart-table {
    width: 100%;
    text-align: center;
    border-collapse: collapse;
}

.cart-table th, .cart-table td {
    padding: 10px;
    border-bottom: 1px solid #eee;
}

.cart-table img {
    width: 80px;
    border-radius: 4px;
}

.cart-total {
    font-size: 18px;
    font-weight: bold;
    color: red;
    margin-top: 20px;
}

.checkout-button {
    background-color: #ee4d2d;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 20px;
    width: 100%;
}
.checkout-input,
.checkout-textarea,
select {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}
</style>

<div class="cart-container">

    <!-- Gi·ªè h√†ng b√™n tr√°i -->
    <div class="cart-left">
        <h2>üõí Gi·ªè h√†ng</h2>
        <table class="cart-table">
            <thead>
                <tr>
                    <th>·∫¢nh</th>
                    <th>T√™n</th>
                    <th>Gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Th√†nh ti·ªÅn</th>
                    <th>X√≥a</th>
                </tr>
            </thead>
            <tbody>
                {% for item in cart_items %}
                <tr>
                    <td><img src="{{ item.product.image.url }}"></td>
                    <td>{{ item.product.name }}</td>
                    <td>{{ item.product.price|floatformat:0 }}‚Ç´</td>
                    <td>
                        <form method="post" action="{% url 'update_cart' item.product.id %}">
                            {% csrf_token %}
                            <button type="submit" name="action" value="decrease">‚ûñ</button>
                            {{ item.quantity }}
                            <button type="submit" name="action" value="increase">‚ûï</button>
                        </form>
                    </td>
                    <td>{{ item.total_price|floatformat:0 }}‚Ç´</td>
                    <td>
                        <form method="post" action="{% url 'remove_from_cart' item.product.id %}">
                            {% csrf_token %}
                            <button type="submit">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Ph·∫ßn thanh to√°n b√™n ph·∫£i -->
    <div class="cart-right">
        <h3>Thanh to√°n</h3>
        <form method="post" action="{% url 'dat_hang' %}">
            {% csrf_token %}
            <input type="text" name="full_name" value="{{ user.full_name }}" placeholder="H·ªç v√† t√™n" class="checkout-input" required>
            <input type="text" name="phone_number" value="{{ user.phone_number }}" placeholder="S·ªë ƒëi·ªán tho·∫°i" class="checkout-input" required>
            <textarea name="address" placeholder="ƒê·ªãa ch·ªâ giao h√†ng" class="checkout-textarea" required>{{ user.address }}</textarea>

            <label for="payment_method">Ph∆∞∆°ng th·ª©c thanh to√°n:</label>
            <select name="payment_method" class="checkout-input">
                <option value="COD">Thanh to√°n khi nh·∫≠n h√†ng (COD)</option>
                <option value="Bank">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                <option value="Wallet">V√≠ ƒêi·ªán T·ª≠ Momo</option>
            </select>

            <div class="cart-total">T·ªïng: {{ total_price|floatformat:0 }}‚Ç´</div>

            <button type="submit" class="checkout-button">ƒê·∫∑t H√†ng</button>
        </form>
    </div>

</div>
{% endblock %}
